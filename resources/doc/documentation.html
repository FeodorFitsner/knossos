<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
    <title>Knossos Documentation</title>
  </head>
  <body>
      <h1 id="knossos-quickstart-guide"><strong>Knossos</strong> Quickstart Guide</h1>

      <p>This tutorial should give a very rough introduction and overview about <strong>Knossos</strong> 4.1.0 and its features.</p>

      <p><strong>Knossos</strong> is a multi-platform scientific tool written in C++<sup>†</sup> to visualize large volume image data generated by <em>Serial Blockface Scanning Electron Microscopy (SBFSEM)</em>. It provides the ability to overlay the image data with a user generated skeleton structure, representing the spatial structure and the connectivity of labeled neurons, and displays a three dimensional model of it.</p>

      <p><sub>†<strong>Knossos</strong> uses the following libraries: Qt 5, QuaZIP, PythonQt, OpenGL, Boost, glut, google-snappy, libCURL, openJPEG 2000.</sub></p>

      <h2 id="lanching-knossos">Lanching <strong>Knossos</strong></h2>

      <ul>
        <li>Execute <strong>Knossos</strong> 4.1.0.</li>
        <li>Open the Dataset Chooser Dialog at the top-left menu entry: <code>File</code> - <code>Choose Dataset...</code></li>
        <li>To load a dataset from your computer:
          <ol>
            <li>Press <code>...</code> and navigate to the <code>knossos.conf</code> file of that dataset,</li>
            <li>press on <code>Add Dataset</code> (the dataset appears in the list on the left side),</li>
            <li>select the dataset in the list and press on <code>Use</code> to load it.</li>
          </ol>
        </li>
        <li>The <em>Data cache cube edge length</em> option sets the <em>Supercube Edge</em>, i.e. the number of cubes to be loaded per viewport. Higher numbers require more memory.
          <ul>
            <li>A supercube edge size of <code>5</code> is optimal for tracing (requires 250 MB RAM). Other sensible settings are <code>7</code> (requires 686 MB RAM) or <code>3</code> (54 MB RAM).</li>
          </ul>
        </li>
        <li>On exit, <strong>Knossos</strong> remembers the last used dataset and automatically loads it on next start.</li>
      </ul>

      <p><span class="image fit"><img src="images/Tut_loadDataset.png" alt="Dataset widget" /></span></p>

      <hr />

      <p>You can see four viewports which show the 3D image data:</p>

      <ul>
        <li><code>XY</code> plane of the stack (upper left, red border)</li>
        <li><code>XZ</code> plane of the stack (lower left, green border)</li>
        <li><code>YZ</code> plane of the stack (upper right, blue border)</li>
        <li>3D view of the annotation (lower right)</li>
      </ul>

      <p><span class="image fit"><img src="images/Tut_Viewports.png" alt="Viewports" /></span></p>

      <!-- TODO The colors of the crosshairs visualize the direction of the viewports. -->

      <hr />

      <p>In the tool bar, you can enter or paste coordinates in the format <code>x, y, z</code>, wheron the view centers automatically on the target coordinate.</p>

      <hr />

      <p>The most relevant <strong>Knossos</strong> window is the annotation window:</p>

      <p><span class="image fit"><img src="images/Tut_treeview.png" alt="**Knossos** Annotation Window" /></span></p>

      <p>This window displays your annotation progress. Select either <code>Tree View</code> or <code>Segmentation</code> to see your skeleton structure/segmentation.</p>

      <hr />

      <h2 id="savingauto-savingloading">Saving/Auto-Saving/Loading</h2>

      <ul>
        <li>The annotation data will be saved automatically every five minutes if changes have been made.</li>
        <li>To manually save your data, press <code>Ctrl+S</code> or select <code>File</code> - <code>Save Annotation</code>.</li>
        <li>Annotation files can be loaded into <strong>Knossos</strong> by choosing <code>File</code> and <code>Load Annotation</code>. Alternatively, you can also choose between recently saved files by pressing <code>Files</code> and <code>Recent Annotation File(s)</code>.</li>
      </ul>

      <h2 id="basic-viewport-handling">Basic Viewport Handling</h2>

      <p>To move through the dataset, place the mouse cursor in one of the three slice plane viewports and</p>

      <ul>
        <li>press <code>f</code> or <code>d</code> or use the arrow keys: Move one layer forward or backward,</li>
        <li>press <code>f</code> or <code>d</code> in combination with <code>Shift</code>: Jump ten layers forward or backward,</li>
        <li>or move the mouse wheel up or down.</li>
      </ul>

      <p>By pressing the left mouse button, you can</p>

      <ul>
        <li>pull the stack in the desired direction (if <code>Navigation</code> - <code>Drag Dataset</code> is enabled),</li>
        <li>
          <p>or let <strong>Knossos</strong> center on that point (if <code>Navigation</code> - <code>Recenter on Click</code> is enabled).</p>
        </li>
        <li>To translate/rotate in the 3D viewport, press and hold the left/right mouse button inside the 3D viewport and drag.</li>
        <li>To zoom into the dataset or into the 3D viewport, place the mouse cursor in one of the four viewports and press <code>i</code> or <code>o</code> to zoom in/out.</li>
        <li>To resize the viewports, drag the corner buttons and to move them, use <code>Ctrl + left mouse drag</code>. To restore the standard positions and sizes click the button <code>Reset VP Positions</code> in the tool bar.</li>
      </ul>

      <h2 id="skeleton-tracing">Skeleton Tracing</h2>

      <p>Nodes are placed by a right click in one of the three slice plane viewports, and are automatically linked to the last node. To just “drop” nodes without linking, you have to change the work mode via <em>Edit Skeleton</em> and <em>Work Mode</em> in the menu bar.</p>

      <ul>
        <li>The currently active node can be recognized by its number which appears beside the point or via the Annotation window.</li>
        <li>You can activate a node by holding down <code>Shift</code> and left-clicking it or by selecting the node in the <em>Tree View</em> tab of the <em>Annotation</em> window</li>
        <li>Press <code>x</code>/<code>Shift+X</code> in one of the viewports to activate the next/previous node. To change the active tree, press <code>z</code> or <code>Shift+Z</code>.</li>
        <li>To jump to the active node press <code>s</code>.</li>
        <li>You can delete the active node by pressing <code>Del</code> on your keyboard.</li>
        <li>If you want to reposition a node, simply click on the node with the middle mouse button and drag it to another position. The node does not have to be your active node.</li>
        <li>You can add branch nodes by holding <code>Ctrl</code> while pressing the right mouse button. To transform a normal node to a branch node press <code>b</code> or choose <code>Push Branch Node</code> in the Annotation window. To jump to the last placed branch node, press <code>j</code> or use <code>Pop &amp; Jump</code> in the Annotation window. This transforms the branch node to a normal node.</li>
        <li>Different node colors indicate different node types:
          <ul>
            <li>Blue: Branch node</li>
            <li>Yellow: Commented node (will be blue, if it is also a branch node)</li>
          </ul>
        </li>
        <li>To link two non-connected nodes or to unlink two connected nodes, activate one of them, hold <code>Alt</code> and left click the second node or hold <code>Shift</code> and click on the second node with the mouse wheel. Alternatively, this can also be done in the <em>Annotation</em> window.
    &lt;!– TODO *   If you want to delete a huge part of the skeleton:
          <ol>
            <li>First, isolate the segment by cutting the connection points to other segments.
              <ul>
                <li>Click on the outermost node of that segment (a node that is on the edge of your segment),</li>
                <li>press <code>Alt</code> and the</li>
              </ul>
            </li>
          </ol>
        </li>
      </ul>

      <p>–&gt;
    <!--
     part by unlinking the corresponding nodes and pressing `Split Last Component From Tree`. This divides that tree into two trees; using `Delete Active Tree` deletes this part. The Button `Merge Trees` merges two trees into one tree.
     --></p>

      <h2 id="comments">Comments</h2>

      <p>You can add a comment on trees and nodes by using the lists in the <em>Annotation</em> window.</p>

      <ul>
        <li>If you use some comments regularly, you can enter them in the <em>Comments</em> tab of the <em>Annotation</em> window, and add them to the active node by pressing <code>F1-F10</code>.</li>
        <li>If you enable <em>Use custom comment colors</em> and <em>Use custom comment radius</em>, you can also specify the highlighting color and radius for these nodes.</li>
      </ul>

      <p><span class="image fit"><img src="images/Tut_commentsWindow.png" alt="**Knossos** Comment Window" /></span></p>

      <h2 id="shortcuts">Shortcuts</h2>

      <h3 id="application-shortcuts">Application Shortcuts</h3>

      <table>
        <thead>
          <tr>
            <th style="text-align: center">Shortcut</th>
            <th style="text-align: left">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="text-align: center">Ctrl+O</td>
            <td style="text-align: left">Load annotation from file</td>
          </tr>
          <tr>
            <td style="text-align: center">Ctrl+S</td>
            <td style="text-align: left">Save annotation</td>
          </tr>
          <tr>
            <td style="text-align: center">Ctrl+C</td>
            <td style="text-align: left">Copy current coordinates</td>
          </tr>
          <tr>
            <td style="text-align: center">Ctrl+V</td>
            <td style="text-align: left">Paste coordinates</td>
          </tr>
          <tr>
            <td style="text-align: center">Ctrl+H</td>
            <td style="text-align: left">Open this documentation</td>
          </tr>
          <tr>
            <td style="text-align: center">Ctrl+Q<br />(equal to <code>Alt+F4</code>)</td>
            <td style="text-align: left">Close <strong>Knossos</strong></td>
          </tr>
        </tbody>
      </table>

      <h3 id="tree-shortcuts">Tree Shortcuts</h3>

      <table>
        <thead>
          <tr>
            <th style="text-align: center">Shortcut</th>
            <th style="text-align: left">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="text-align: center">C</td>
            <td style="text-align: left">Create a new tree</td>
          </tr>
          <tr>
            <td style="text-align: center">Z/Shift+Z</td>
            <td style="text-align: left">Move to next/previous tree (by tree ID)</td>
          </tr>
          <tr>
            <td style="text-align: center">X/Shift+X</td>
            <td style="text-align: left">Move to next/previous node (by node ID)</td>
          </tr>
        </tbody>
      </table>

      <h3 id="node-shortcuts">Node Shortcuts</h3>

      <table>
        <thead>
          <tr>
            <th style="text-align: center">Shortcut</th>
            <th style="text-align: left">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="text-align: center">S</td>
            <td style="text-align: left">Jump to active node</td>
          </tr>
          <tr>
            <td style="text-align: center">DEL</td>
            <td style="text-align: left">Delete active node</td>
          </tr>
          <tr>
            <td style="text-align: center">B</td>
            <td style="text-align: left">Mark active node as branch node</td>
          </tr>
          <tr>
            <td style="text-align: center">J</td>
            <td style="text-align: left">Jump to last branch node</td>
          </tr>
          <tr>
            <td style="text-align: center">Shift + left click on node</td>
            <td style="text-align: left">Reduce selection to clicked node</td>
          </tr>
          <tr>
            <td style="text-align: center">Ctrl + left click on node</td>
            <td style="text-align: left">Add/Remove node from selection</td>
          </tr>
          <tr>
            <td style="text-align: center">Ctrl + left mouse drag</td>
            <td style="text-align: left">Pull selection square to select multiple nodes</td>
          </tr>
          <tr>
            <td style="text-align: center">Alt + left click on node<br />(equal to SHIFT + mouse wheel click on node)</td>
            <td style="text-align: left">Add/delete segment between clicked node and active node</td>
          </tr>
          <tr>
            <td style="text-align: center">Mouse wheel hold and drag on node</td>
            <td style="text-align: left">Move node to new position</td>
          </tr>
          <tr>
            <td style="text-align: center">A</td>
            <td style="text-align: left">Change to work mode “Add node”</td>
          </tr>
          <tr>
            <td style="text-align: center">W</td>
            <td style="text-align: left">Change to work mode “Link node”</td>
          </tr>
          <tr>
            <td style="text-align: center">N/P</td>
            <td style="text-align: left">Jump to next/previous comment node</td>
          </tr>
          <tr>
            <td style="text-align: center">F1-F10</td>
            <td style="text-align: left">Custom comment shortcuts</td>
          </tr>
        </tbody>
      </table>

      <h3 id="viewport-shortcut">Viewport Shortcut</h3>

      <table>
        <thead>
          <tr>
            <th style="text-align: center">Shortcut</th>
            <th style="text-align: left">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="text-align: center">Left/Right arrow key</td>
            <td style="text-align: left">Jump [Jump Frames] steps left/right in active viewport<br />(Jump Frames can be defined at “Preferences”&gt;”Dataset Navigation”)</td>
          </tr>
          <tr>
            <td style="text-align: center">SHIFT + Left/Right arrow key</td>
            <td style="text-align: left">Jump 10 steps left/right in active viewport</td>
          </tr>
          <tr>
            <td style="text-align: center">Up/Down arrow key</td>
            <td style="text-align: left">Jump [Jump Frames] steps up/down in active viewport</td>
          </tr>
          <tr>
            <td style="text-align: center">SHIFT + Up/Down arrow key</td>
            <td style="text-align: left">Jump 10 steps up/down in active viewport</td>
          </tr>
          <tr>
            <td style="text-align: center">F/D<br />(equal to mouse wheel forward/backward)</td>
            <td style="text-align: left">Jump [Jump Frames] steps forward/backward in active viewport<br />(Jump Frames can be defined at “Preferences”&gt;”Dataset Navigation”)</td>
          </tr>
          <tr>
            <td style="text-align: center">SHIFT + F/D</td>
            <td style="text-align: left">Jump 10 steps forward/backward in active viewport</td>
          </tr>
          <tr>
            <td style="text-align: center">I/O in orthogonal viewports<br />(equal to CTRL + mouse scroll)</td>
            <td style="text-align: left">Zoom in and out of orthogonal viewports</td>
          </tr>
          <tr>
            <td style="text-align: center">CTRL+ALT+left mouse drag</td>
            <td style="text-align: left">drag viewport<br />(restore original position by clicking on “reset viewports” in the tool bar)</td>
          </tr>
          <tr>
            <td style="text-align: center">3</td>
            <td style="text-align: left">Toggle viewport crosshairs</td>
          </tr>
        </tbody>
      </table>

      <hr />

      <h1 id="knossos-full-documentation"><strong>Knossos</strong> Full Documentation</h1>

      <h2 id="branch-points">Branch Points</h2>

      <p>Branch points help you to relocate important nodes in your skeleton.</p>

      <ul>
        <li>This feature is mainly used to find a location where the cell divides into two branches. Since you can only follow one branch, you have to find the other one later to trace it.</li>
        <li>Branch points are <em>stacked</em>. This means that new branch points will be stacked onto the old ones in the branch point file and when you jump to them you first come to the newer branch points and afterwards to the older ones.</li>
      </ul>

      <h3 id="add-branch-point">Add Branch Point</h3>

      <ul>
        <li>You can make a node a branch point by simply pressing <code>B</code> on your keyboard while the node is activated. The color of the node turns to blue.</li>
        <li>Another possibility is to use <code>Ctrl+(RB)</code> on a new position. A node will be added which is simultaneously marked as a branch point. This node does not automatically become active (in comparison to normal node placing).</li>
      </ul>

      <h3 id="jump-to-branch-point">Jump to Branch Point</h3>

      <ul>
        <li>Press <code>J</code> on your keyboard to jump to the last made branch point. The flagging as a branch point is automatically removed. If you want to keep it, press <code>B</code> again on your keyboard.</li>
        <li>Another possibility is to click on <em>Pop and (J)ump</em> in the annotation window. See <a href="#branch-points">Branch Point (annotation window)</a> for further information.</li>
      </ul>

      <h3 id="remove-branch-point">Remove Branch Point</h3>

      <p>A branch point is removed at the time you jump to it.</p>

      <hr />

      <h2 id="coordinates">Coordinates</h2>

      <p>In the upper left section of <strong>Knossos</strong>, you can enter the <code>x</code>, <code>y</code>, and <code>z</code> coordinates of a location you want to move to, e.g. to find the seedpoint of your tracing.</p>

      <p>Simply type each coordinate into the respective field, or copy your coordinates from an excel file (separated by blanks, e.g. <code>100 100 100</code>) and click on the <code>Paste</code> button (or press <code>Ctrl+V</code> on your keyboard).</p>

      <h3 id="copy-coordinates">Copy coordinates</h3>

      <ul>
        <li>If you want to extract the coordinates of your current location, click on the <code>Copy</code> button left from the coordinate fields. The coordinates will be copied to your clipboard, separated with blanks.</li>
      </ul>

      <hr />

      <h2 id="edit-skeleton-menu">Edit Skeleton (Menu)</h2>

      <h3 id="work-mode">Work Mode</h3>
      <p>Here you can choose between different types of placing a node.</p>

      <h3 id="add-node">Add node</h3>
      <p>This work mode does not connect the first node you place with any previously active node. Further placed nodes will be connected as usual. Pressing <code>a</code> on your keyboard will do the same.</p>

      <h3 id="link-with-active-node">Link with active node</h3>
      <p>This is the normal work mode, i.e. each new placed node will be connected to the previously active node (and becomes the next active node).</p>

      <h3 id="drop-nodes">Drop nodes</h3>
      <p>This work mode simply places single nodes without connecting them. This is a special work mode which you only need if you want to drop “node clouds” e.g. for <em>glia</em> cells.</p>

      <h3 id="clear-skeleton">Clear Skeleton</h3>
      <p>This menu item will clear the whole cube from any skeleton you traced/loaded. You will be asked by a dialog if you really want to do this.</p>

      <hr />

      <h2 id="file-menu">File (Menu)</h2>

      <h3 id="load-annotation">Load Annotation…</h3>

      <p>Select <code>File</code> - <code>Load Annotation...</code> to load an annotation file.</p>

      <ul>
        <li>Browse through your folders and choose a file. Then click on “Open”</li>
        <li>Alternatively, simply drag and drop a annotation file from your computer onto <strong>Knossos</strong> to load it.</li>
        <li>A dialog will appear to ask you if the current annotation should be overriden by the new one or if they should be merged together.</li>
      </ul>

      <p><strong>Knossos</strong> supports both <code>NML</code> files and <code>.k.zip</code> files.</p>

      <h3 id="recent-annotation-files">Recent Annotation File(s)</h3>

      <p>This menu item will show you a list of recently loaded annotation files.</p>

      <h3 id="save-annotation-file">Save Annotation File</h3>

      <p>Here you can save your current annotations on your computer. Pressing <code>Ctrl+S</code> will do the same.</p>

      <h3 id="standard-save-folder-for-annotation-files">Standard save folder (for annotation files)</h3>

      <p>If you haven’t saved a file yet using <code>Save Annotation as...</code>, the file will be stored in the <code>annotationFiles</code> folder in your operating system’s standard application data folder. Under Windows, this is <code>%LocalAppData%\MPIMF\Knossos [version]\annotationFiles</code>. The file name will be a combination of the date and time when you started <strong>Knossos</strong> to do tracing.</p>

      <ul>
        <li>If you have already stored a file in a specific folder and used a file name without “.000.k.zip” at the end, <strong>Knossos</strong> will save a new file in this folder using the previous file name and adding “.000.k.zip”. If the file name already contains “.000.k.zip”, <strong>Knossos</strong> will name the subsequent saved files “.001.k.zip”, “.002.k.zip” and so on, given that you did not turn off the option <em>Auto Increment Filename</em> (for further information see <a href="#data-saving-options">Data Saving Options</a>).</li>
      </ul>

      <h3 id="save-annotation-as">Save Annotation As…</h3>

      <p>To specify the file name and the folder for your annotation file, choose this menu item.</p>

      <hr />

      <h2 id="help-menu">Help (Menu)</h2>

      <h3 id="about">About</h3>

      <p>This menu item opens a window containing some developer information about <strong>Knossos</strong>.</p>

      <h3 id="documentation">Documentation</h3>

      <p>Here you can find <strong>Knossos’</strong> documentation</p>

      <hr />

      <h2 id="shortcuts-1">Shortcuts</h2>

      <p>(In this paragraph, <code>LMB</code> means “Left mouse button”, <code>RMB</code> means “Right mouse button”, and <code>MMB</code> means “Middle mouse button”. Also keep in mind that on OS X, <code>Ctrl</code> is the <code>Cmd</code> key.)</p>

      <p>There are some key combinations which might help you to be faster on <strong>Knossos</strong>:</p>

      <ul>
        <li><code>Shift+&amp;#8593;&amp;#8595;&amp;#8592;&amp;#8594;</code>: Moves dataset 10 planes into the corresponding direction instead of 1 plane for faster scrolling.</li>
        <li><code>Shift+F/D</code>: Moves dataset 10 planes forwards/backwards, for faster perpendicular scrolling.</li>
        <li><code>Ctrl+S</code>: Saves your annotation in the same way as the autosaving feature does (auto increment number). See <a href="#save-annotation-file">Save file</a>.</li>
        <li><code>Ctrl+V</code>: If you have copied the coordinates into clipboard you can use this to quickly paste them into <strong>Knossos</strong> and jump to that location. See <a href="#coordinates">Paste coordinates</a>.</li>
        <li><code>Ctrl + Mouse Wheel</code>: Zooms in and out of the three orthogonal viewports. In the 3D viewport you don’t need to hold <code>Ctrl</code>.</li>
        <li><code>Shift + Mouse Wheel</code>: Changes the node radius of the active node. See <a href="#node-radius">Node Radius</a> for further information.</li>
        <li><code>Shift+LMB</code> on node: Activates node.</li>
        <li><code>Ctrl+RMB</code> in slice viewport: Adds a node which is simultaneously marked as a branch point (but does not become an active node).</li>
        <li><code>Shift+MMB</code> on a node: Deletes segment between the active and the clicked node. See <a href="#delete-segment">Delete segment</a>.</li>
        <li><code>Ctrl+MMB</code> on a node: Adds segment between the active and the clicked node. See <a href="#connect-nodes">Connect nodes</a>.</li>
      </ul>

      <h2 id="all-available-shortcuts">All Available Shortcuts</h2>

      <h3 id="application-shortcuts-1">Application Shortcuts</h3>

      <table>
        <thead>
          <tr>
            <th style="text-align: center">Shortcut</th>
            <th style="text-align: left">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="text-align: center"><code>Ctrl+O</code></td>
            <td style="text-align: left">Load annotation from file</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>Ctrl+S</code></td>
            <td style="text-align: left">Save annotation</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>Ctrl+C</code></td>
            <td style="text-align: left">Copy current coordinates</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>Ctrl+V</code></td>
            <td style="text-align: left">Paste coordinates</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>Ctrl+H</code></td>
            <td style="text-align: left">Open this documentation</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>Ctrl+Q</code><br />(equal to <code>Alt+F4</code>)</td>
            <td style="text-align: left">Close <strong>Knossos</strong></td>
          </tr>
        </tbody>
      </table>

      <h3 id="tree-shortcuts-1">Tree Shortcuts</h3>

      <table>
        <thead>
          <tr>
            <th style="text-align: center">Shortcut</th>
            <th style="text-align: left">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="text-align: center"><code>C</code></td>
            <td style="text-align: left">Create a new tree</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>Z/Shift+Z</code></td>
            <td style="text-align: left">Move to next/previous tree (by tree ID)</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>X/Shift+X</code></td>
            <td style="text-align: left">Move to next/previous node (by node ID)</td>
          </tr>
        </tbody>
      </table>

      <h3 id="node-shortcuts-1">Node Shortcuts</h3>

      <table>
        <thead>
          <tr>
            <th style="text-align: center">Shortcut</th>
            <th style="text-align: left">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="text-align: center"><code>S</code></td>
            <td style="text-align: left">Jump to active node</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>Del</code></td>
            <td style="text-align: left">Delete active node</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>B</code></td>
            <td style="text-align: left">Mark active node as branch node</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>J</code></td>
            <td style="text-align: left">Jump to last branch node</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>Shift+LMB</code> on node</td>
            <td style="text-align: left">Mark clicked node as active node</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>Ctrl+LMB</code> on node</td>
            <td style="text-align: left">Select node for an operation</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>Ctrl+LMB</code> drag</td>
            <td style="text-align: left">Pull selection square to select multiple nodes</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>Alt+LMB</code> on node<br />(equal to Shift + mouse wheel click on node)</td>
            <td style="text-align: left">Add/delete segment between clicked node and active node</td>
          </tr>
          <tr>
            <td style="text-align: center">Mouse wheel hold and drag on node</td>
            <td style="text-align: left">Move node to new position</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>A</code></td>
            <td style="text-align: left">Change to work mode “Add node”</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>W</code></td>
            <td style="text-align: left">Change to work mode “Link node”</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>N/P</code></td>
            <td style="text-align: left">Jump to next/previous comment node</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>F1-F10</code></td>
            <td style="text-align: left">Custom comment shortcuts</td>
          </tr>
        </tbody>
      </table>

      <h3 id="viewport-shortcuts">Viewport Shortcuts</h3>

      <table>
        <thead>
          <tr>
            <th style="text-align: center">Shortcut</th>
            <th style="text-align: left">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="text-align: center">Left/Right arrow key</td>
            <td style="text-align: left">Jump [Jump Frames] steps left/right in active viewport<br />(Jump Frames can be defined at “Preferences”&gt;”Dataset Navigation”)</td>
          </tr>
          <tr>
            <td style="text-align: center">Shift + Left/Right arrow key</td>
            <td style="text-align: left">Jump 10 steps left/right in active viewport</td>
          </tr>
          <tr>
            <td style="text-align: center">Up/Down arrow key</td>
            <td style="text-align: left">Jump [Jump Frames] steps up/down in active viewport</td>
          </tr>
          <tr>
            <td style="text-align: center">Shift + Up/Down arrow key</td>
            <td style="text-align: left">Jump 10 steps up/down in active viewport</td>
          </tr>
          <tr>
            <td style="text-align: center">F/D<br />(equal to mouse wheel forward/backward)</td>
            <td style="text-align: left">Jump [Jump Frames] steps forward/backward in active viewport<br />(Jump Frames can be defined at “Preferences”&gt;”Dataset Navigation”)</td>
          </tr>
          <tr>
            <td style="text-align: center">Shift + F/D</td>
            <td style="text-align: left">Jump 10 steps forward/backward in active viewport</td>
          </tr>
          <tr>
            <td style="text-align: center">I/O in orthogonal viewports<br />(equal to <code>Ctrl</code> + mouse scroll)</td>
            <td style="text-align: left">Zoom in and out of orthogonal viewports</td>
          </tr>
          <tr>
            <td style="text-align: center"><code>Ctrl</code> + <code>Alt</code> + Left Mouse drag</td>
            <td style="text-align: left">drag viewport<br />(restore original position by clicking on “Reset VP Positions” in the toolbar)</td>
          </tr>
          <tr>
            <td style="text-align: center">3</td>
            <td style="text-align: left">Toggle viewport crosshairs</td>
          </tr>
        </tbody>
      </table>

      <hr />

      <h2 id="moving-scrolling-panning">Moving [scrolling, panning]</h2>

      <ul>
        <li>There are many ways in <strong>Knossos</strong> to move through the dataset. They are listed here in priority order:
          <ul>
            <li>You can use your left mouse button to either drag the dataset by clicking and pulling in one direction, or to recenter the view on the position you clicked (depending on the <a href="#work-mode">Work Mode</a> you chose)</li>
            <li>Use the arrow keys on your keyboard to move into the corresponding direction (depending on which slice viewport your mouse cursor is currently positioned).
              <ul>
                <li>Using the arrow keys while holding down <code>Shift</code> will move 10 planes.</li>
              </ul>
            </li>
            <li>Use your mouse wheels to move perpendicularly to the viewport where your mouse cursor is currently positioned.</li>
            <li>Using <code>D</code> and <code>F</code> on your keyboard will also move the dataset perpendicularly an amount of [Jump Frames] planes, [Jump Frames] can be defined under “Preferences” –&gt; “Navigation Settings”.
              <ul>
                <li>Using F/D while holding down Shift will perpendicularly move 10 planes.</li>
              </ul>
            </li>
            <li>Placing a node using your right mouse button will recenter the view on the node. (Adding one using <code>Ctrl</code> + right mouse button won’t do so).</li>
            <li>You can jump to the currently active node using <code>s</code> on your keyboard.</li>
            <li>By entering a coordinate in the upper left coordinate fields you can jump to a desired location. See <a href="#coordinates">here</a> for further information.</li>
            <li>You can jump to a node previously marked as a branch point using J on your keyboard or using your <a href="#branch-points"><em>Annotation</em> window</a>.</li>
            <li>You can search for nodes with comments using N and P on your keyboard or your <a href="#tree-view">Annotation window</a>.
              <ul>
                <li>There you can also search for a specific comment by typing it into the field <em>Search node</em>.</li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>

      <hr />

      <h2 id="nodes-skeleton-nodes-skeleton-points">Nodes [skeleton nodes, skeleton points]</h2>

      <h3 id="activate-nodes">Activate nodes</h3>

      <ul>
        <li>The currently active node is highlighted by its node ID which is shown right near to the node.</li>
        <li>New placed nodes will be connected to the currently active node, given that the option <a href="#link-with-active-node">Link with active node</a> is enabled (default).</li>
        <li>Furthermore, several functions such as <a href="#delete-node">Delete node</a>, <a href="#connect-nodes">Connect nodes/Make segment</a>, <a href="#delete-segment">Delete segment</a> and <a href="#branch-points">branch points</a> are related to the currently active node.</li>
        <li>You activate a node by clicking on it with your left mouse button while simultaneously having the Shift key on your keyboard pressed.
          <ul>
            <li>Another possibility is to choose the desired node ID in the Annotation window.</li>
          </ul>
        </li>
      </ul>

      <h3 id="add-nodes">Add nodes</h3>

      <ul>
        <li>You place a node by clicking with the right mouse button into one of the slice viewports.
          <ul>
            <li>The first node of a skeleton is always marked blue and gets the comment “First Node” automatically.</li>
            <li>Furthermore, the program centers the viewport on the node you have just placed.</li>
            <li>Further nodes you place will be automatically connected with the previously placed (or activated) node, given that the option Link with active node is enabled (default).</li>
          </ul>
        </li>
      </ul>

      <h3 id="connect-nodes">Connect nodes</h3>

      <ul>
        <li>You can connect two nodes with each other by activating one of the two nodes and clicking on the other one with the middle mouse button while simultaneously holding down the <code>Ctrl</code> key on your keyboard.
          <ul>
            <li>This is helpful, e.g. if you separated two skeleton parts by accident and you want to connect them again.</li>
            <li>Another way is to select both nodes in the Annotation window’s Tree View and link them by the right-click menu entry “(Un)link nodes”. Repeating this unlinks the nodes again.</li>
          </ul>
        </li>
      </ul>

      <h3 id="delete-segment">Delete segment</h3>

      <ul>
        <li>You can delete the connection (segment) between two nodes by activating one of them and clicking on the other with your middle mouse button while holding down the Shift key on your keyboard.
          <ul>
            <li>This is helpful if you want to separate two parts of your skeleton (to delete one of them or to make two trees according to <a href="#split-component-from-tree">Split Trees</a>)</li>
          </ul>
        </li>
      </ul>

      <h3 id="delete-node-remove-node">Delete node [remove node]</h3>

      <ul>
        <li>You can delete a node by selecting it (<code>Ctrl</code>+left click) and pressing DEL on your keyboard.
          <ul>
            <li>Another way is to use the Tree View of the Annotation window: <a href="#tree-view">Tree View</a>)</li>
          </ul>
        </li>
      </ul>

      <h3 id="move-node-reposition-node-drag-node">Move node [reposition node, drag node]</h3>

      <ul>
        <li>If you want to move a node (e.g. to bring it to the center of the cell), simply click on the node with the middle mouse button and drag it to another position. The node does not have to be your active node. You can also enter the desired coordinates for the node in the Tree View of the Annotation Widget.</li>
      </ul>

      <h3 id="select-nodes-operate-on-multiple-nodes">Select nodes [operate on multiple nodes]</h3>

      <ul>
        <li>Sometimes you want to perform actions on multiple nodes, e.g. delete many nodes at once. You do this by selecting nodes in the viewport: <code>Ctrl</code>+left-click on a node selects it. <code>Ctrl</code> + left mouse drag in the viewport pulls a selection square that selects all nodes within.</li>
        <li><code>Ctrl</code> + leftclick a selected node to unselect it, or press ESC to undo the entire node selection.</li>
        <li>Press DEL to delete all selected nodes.</li>
        <li>The selected nodes are highlighted in green in both the viewports and the Tree View of the Annotation Window. Right-clicking on the node list in the Tree View opens a context menu where you can perform many operations on the selected nodes (see <a href="#tree-view">here</a>).</li>
        <li>If you have exactly one node selected, it becomes the active node. I.e. the next placed node will be connected to this one.</li>
        <li>Also, when you place a new node, it becomes the next active node, so that the tracing can be continued.</li>
        <li><em>If no nodes are selected, the last annotated or edited node is automatically selected and made active.</em></li>
      </ul>

      <h3 id="node-id">Node ID</h3>

      <ul>
        <li>The Node ID of each node is unique among all skeletons traced/loaded in the dataset. Each new added node gets a new ID, starting from 1. This enables you to relocate each node.</li>
      </ul>

      <hr />

      <h2 id="preferences-menu">Preferences (Menu)</h2>

      <h3 id="load-custom-preferences">Load Custom Preferences</h3>

      <ul>
        <li>Here, you can load your previously saved custom GUI preferences. A window will open and you are asked for the location of the settings-file.</li>
        <li>Custom preferences contain your last used file and folder, the position of your windows, the size of <strong>Knossos</strong>, the look of your viewports etc.</li>
      </ul>

      <h3 id="save-custom-preferences-as">Save Custom Preferences As</h3>

      <ul>
        <li>Here, you can save your current custom GUI preferences. A window will open and you are asked where to save the settings-file containing your preferences.</li>
        <li>The settings-file contains your last used file and folder, the position of your windows, the size of <strong>Knossos</strong>, the look of your viewports etc.</li>
      </ul>

      <h3 id="data-saving-options">Data Saving Options</h3>

      <ul>
        <li>Here you can change the way of automatically saving your proceedings.</li>
        <li>Enabling the option <em>Auto-Saving</em> will save your skeletons on a time interval according to the field <em>Saving Interval [min]</em>.
          <ul>
            <li>By default your data will be saved automatically every 5 minutes. You can change this by typing in another positive value.</li>
          </ul>
        </li>
        <li>The option <em>Auto Increment Filename</em> is enabled by default and will automatically increase the number “###.nml” in the filename at every saving step. Deactivating this will overwrite the saved files at every saving step.</li>
      </ul>

      <h3 id="viewport-setting">Viewport Setting</h3>

      <ul>
        <li>See chapter <a href="#viewport-settings">Viewport Settings</a>.</li>
      </ul>

      <hr />

      <h2 id="annotation-window">Annotation Window</h2>

      <ul>
        <li>
          <p>Under “Windows” –&gt; “Annotation Window” you can open an important, additional window with many features.</p>
        </li>
        <li>
          <p>At the bottom of the window the <em>Total Tree Count</em> and <em>Total Node Count</em> show you the number of trees and nodes in the skeleton. <em>Currently listed Nodes</em> shows you how many nodes are now listed in the “Tree View” of the Annotation Window(see below).</p>
        </li>
      </ul>

      <h3 id="tree-view">Tree View</h3>

      <p>The Tree View is the first Tab in the Annotation Window. It is separated into a section to list trees and a section to list nodes. Here you have an overview of your whole annotation process and you can do several skeleton changing operations.</p>

      <p><img src="images/Tut_treeview.png" alt="**Knossos** Annotation window" /></p>

      <h4 id="tree-section">Tree section</h4>

      <ul>
        <li>Search for trees containing the comment substring entered in the search bar at the top. Check the “RegEx” checkbox to enable a search with a regular expression.</li>
        <li>The list displays all trees with their ID, their color for easy identification and their comment. The active tree is always listed in the first row, separated from the rest.</li>
        <li>Double-clicking a tree in the list makes it the active tree.</li>
        <li>Double click the color of a tree, to change it. And change the comment by writing it into the comment field.</li>
        <li>Select a list entry like in any common table by clicking on it. Select multiple entries in a row by Shift+clicking. Select multiple entries not in a row by <code>Ctrl</code>+clicking.</li>
        <li>Perform operations on selected trees by opening the context menu on them with a right click. The context menu includes:
          <ul>
            <li>Set as active tree (needs exactly one selected tree)</li>
            <li>Move selected node(s) to this tree (needs exactly one selected tree and at least one selected node)</li>
            <li>Merge trees (needs exactly two selected trees, see <a href="#merge-trees">Merge Trees</a>)</li>
            <li>Set comment for trees (sets the same comment for all selected trees)</li>
            <li>Restore default color (restores the selected trees’ colors to default colors)</li>
            <li>Delete tree(s) (pressing DEL achieves the same. Deletes all selected trees and their nodes, a confirmation request will show up)</li>
          </ul>
        </li>
      </ul>

      <h4 id="merge-trees">Merge Trees</h4>

      <p>With the <em>Merge Trees</em> function you can give two trees the same ID, they effectively become components of the same tree.</p>

      <h4 id="the-node-section">The Node section</h4>

      <ul>
        <li>Search for nodes containing the comment substring entered in the search bar at the top. Check the “RegEx” checkbox to enable a search with a regular expression.</li>
        <li>Filter the displayed nodes after following criteria:
          <ul>
            <li>nodes of selected trees (shows only the nodes of trees currently selected in the tree list)</li>
            <li>selected nodes (shows only nodes that are selected either by the list or in the viewport with <code>Ctrl</code>+leftclick on node)</li>
            <li>”… with branch mark”, “… with comments” are optional filters.</li>
            <li>The “Displayed Nodes” drop down restricts the number of displayed nodes to ensure a good performance. If you cannot find a node in the list, because it exceeds the number of displayed nodes, use the filtering mechanisms to find it. If more than several thousand nodes are shown in the list, <strong>Knossos</strong> will run slower.</li>
          </ul>
        </li>
        <li>The list displays all nodes with their ID, their radius, position and comment. The active node is always listed in the first row, separated from the rest.</li>
        <li>Double-clicking a node in the list makes it the active node.</li>
        <li>Directly edit a node’s property by writing into its property fields.</li>
        <li>Select a list entry like in any common table by clicking on it. Select multiple entries in a row by Shift+clicking. Select multiple entries not in a row by <code>Ctrl</code>+clicking.</li>
        <li>Perform operations on selected nodes by opening the context menu on them with a right click. The context menu includes:
          <ul>
            <li>Split component from tree (splits the component containing this node from the tree, see <a href="#split-component-from-tree">Split Component from tree</a>).</li>
            <li>(Un)link nodes (select two nodes, to add or remove a link between them)</li>
            <li>Set comment for nodes (sets the same comment for all selected nodes)</li>
            <li>Set radius for nodes (sets the same radius for all selected nodes)</li>
            <li>Delete node(s) (pressing DEL achieves the same. deletes all selected nodes, a confirmation request will show up)</li>
          </ul>
        </li>
        <li>Move selected nodes from one tree to another by dragging and dropping them onto a tree in the tree list.</li>
      </ul>

      <h4 id="split-component-from-tree">Split Component from Tree</h4>

      <ul>
        <li>Choosing <em>Split Component From Tree</em> checks if the tree with selected node consists of at least two separate components (i.e. one group of nodes is not connected with another group of nodes). If this is the case, then the component with the selected node will become a new tree with an individual (new) ID. For example, this feature can be used if you traced a very long branch and afterwards you recognize that this branch does not belong to your cell. It is easier to delete the first segment at the branchpoint, split the two trees with this function and delete the branch tree, than deleting every single node of the branch.</li>
      </ul>

      <h3 id="commands">Commands</h3>

      <p>In the Commands section, several important functions are accessable.</p>

      <h4 id="active-tree-id">Active Tree ID</h4>

      <ul>
        <li>This shows you the currently active tree ID. This is the tree which is also highlighted in red in all viewports. You can switch to another tree by typing in or toggling to another ID. Using Z/Shift+Z will do the same.</li>
      </ul>

      <h4 id="active-node-id">Active Node ID</h4>

      <ul>
        <li>This shows you the currently active node ID. You can switch to another node by typing in or toggling to another ID. Using X/Shift+X will do the same.</li>
      </ul>

      <h4 id="branch-points-1">Branch Points</h4>

      <ul>
        <li><em>Nodes on Stack</em> shows how many branchpoints have been placed yet.</li>
        <li>Clicking on <em>Push (B)ranch Node</em> will transform the currently active node into a branchpoint. Pressing B on your keyboard will do the same.</li>
        <li>Clicking on <em>Pop &amp; (J)ump</em> will lead you to the last placed branchpoint which simultaneously becomes a normal node again. Pressing J on your keyboard will do the same.</li>
        <li>Note: The first node of a tree you begin to trace is always automatically transformed into a branchpoint.</li>
      </ul>

      <h4 id="node-radius">Node Radius</h4>

      <ul>
        <li>Here you can change the radius of the node. This is normally not necessary, except for <em>Volume Tracing</em> jobs.</li>
        <li>You can change the default node radius (when new nodes are placed) by typing in another value in the field <em>Default Node Radius</em> or by clicking on <em>Use Last Radius as Default</em> to use the last entered radius.</li>
      </ul>

      <h4 id="locking">Locking</h4>

      <ul>
        <li>The Locking feature helps, if the task is to trace a cell only in a defined volume. Locking to a Node will prevent you from placing nodes outside the defined radius.</li>
        <li>You can set the desired locking radius in the field <em>Locking Radius</em>. The unit is in voxels (“planes”).</li>
        <li>Clicking on <em>Enable comment locking</em> will activate the radius locking as soon as a node having the comment according to the text in the field below <em>Lock to Nodes With Comment</em> is searched using the comment search feature.</li>
        <li>Another possibility is to <em>Lock to Active Node</em>. By clicking on this button you are only able to place nodes in the defined radius around the currently active node.</li>
        <li>Clicking on <em>Disable Locking</em> will disable the current lock.</li>
      </ul>

      <h3 id="comments-tab">Comments tab</h3>

      <p>Here you can define your comment shortcuts and select distinguishing colors and radii for them.</p>

      <p>If you want to activate color and radius highlighting, you have to check the options <code>Use custom comment colors</code> and <code>Use custom comment radius</code>.</p>

      <ul>
        <li>Shortcuts can be placed on <code>F1-F10</code>. When pressing a comment shortcut, the currently active node will receive the corresponding comment.
          <ul>
            <li>The shortcuts will be saved for you on closing <strong>Knossos</strong>.</li>
            <li>Note that if a comment matches several substrings, only the first substring will be considered for highlighting. So place your most important substring into the first text box, the second most important into the second text box, and so on.</li>
          </ul>
        </li>
      </ul>

      <h4 id="node-comments">Node Comments</h4>

      <ul>
        <li>The “Node Comments” tab gives you a fast overview over all existing comment nodes. You can filter by branchnodes by checking the “Branch nodes only” checkbox and you can filter for a specific substring.</li>
        <li>By clicking on one table entry, the corresponding node will be activated and the view recenters on its position.</li>
      </ul>

      <hr />

      <h2 id="trees-skeleton">Trees [Skeleton]</h2>

      <h3 id="add-tree-new-tree-new-skeleton">Add tree [new tree, new skeleton]</h3>

      <ul>
        <li>This feature helps you, if you have to trace more than one skeleton at the same time (e.g. tracing task “dense skeletonization”).</li>
        <li>You can start with a new tree by pressing C on your keyboard. The next node you place will start the new tree. This tree has also a new tree ID.
          <ul>
            <li>There is also the possibilty to click on <em>New Tree (C)</em> in the Annotation window under “Commands”.</li>
          </ul>
        </li>
      </ul>

      <h3 id="delete-tree">Delete tree</h3>

      <ul>
        <li>You can delete a whole tree by selecting it by selecting it in the Annotation window’s Tree view, see <a href="#tree-view">Tree View</a>.</li>
      </ul>

      <h3 id="merge-trees-1">Merge trees</h3>

      <ul>
        <li>With the Merge Trees function you can give two trees the same ID.</li>
        <li>This can be done in the Annotation window’s Tree View. For further information, see <a href="#tree-view">Tree View</a>.</li>
      </ul>

      <h3 id="split-trees">Split trees</h3>

      <ul>
        <li>There might be a case where you want to split a tree into two trees, e.g. if you traced a long branch and you recognize afterwards that it did not belong to your skeleton.</li>
        <li>To do this, you need to separate both trees by deleting the node next to the branch point or by deleting the first segment of the branch (see <a href="#delete-segment">Delete segment</a>).
          <ul>
            <li>Afterwards select a node in one of the tree’s components in the Annotation window’s tree view and click on “Split component from tree” in the right-click menu entry. (see <a href="#split-component-from-tree">Split Trees</a>).</li>
            <li>Then you can delete the whole branch at once (see <a href="#delete-tree">Delete skeleton</a>).</li>
          </ul>
        </li>
      </ul>

      <h3 id="tree-id">Tree ID</h3>

      <ul>
        <li>The tree ID of a skeleton is normally unique among all skeletons traced/loaded in the dataset. Each new added tree gets a new ID and color.</li>
        <li>To see the ID of the current active tree, see <a href="#active-tree-id">Active Tree ID</a></li>
      </ul>

      <hr />

      <h2 id="navigation-menu">Navigation (Menu)</h2>

      <h3 id="work-mode-1">Work Mode</h3>

      <p>Here you can change the way of moving through the stacks with your left mouse button. Choose the one which is more pleasant to you.</p>

      <h3 id="drag-dataset">Drag Dataset</h3>

      <p>If you choose this option, you can move the stack by clicking (and holding) with your left mouse button on a slice viewport and dragging it into the desired direction.</p>

      <h3 id="recenter-on-click">Recenter on Click</h3>

      <p>If you choose this option, you can move the stack with your mouse by clicking on a location in the slice viewports with your left mouse button. The view recenters on this point.</p>

      <h3 id="dataset-navigation-options">Dataset Navigation Options</h3>

      <p>This will open an additional window, where you can change settings about how fast to navigate through the stack.</p>

      <ul>
        <li><em>Movement Speed</em> changes the speed of moving through the stack when using your arrow keys on the keyboard. The higher the value, the faster you are moving.</li>
        <li><em>Jump Frames</em> represents the amount of planes which will be moved when pressing once on your arrow keys or D/F. For example, a value of 100 will jump 100 planes into the direction according to your arrow key.</li>
        <li>Remember, these two settings will only change the way of moving with your arrow keys and D/F.</li>
        <li><em>Recentering Time [ms]</em> sets the time it takes for the viewport to move from the current center position to the position you chose with your left mouse button. Remember, this will only work if you chose “Recenter on Click” as your preferred work mode (see [1]).</li>
      </ul>

      <hr />

      <h2 id="viewport">Viewport</h2>

      <ul>
        <li>When <strong>Knossos</strong> opens, the data can be observed in four different viewports.</li>
        <li>The viewports show the black-white-grey volume image data. The dark area is the Extracellulary Matrix where an enzyme (HRP) is used to deposit heavy metal ions which cause high contrasts in electron microscopy based recordings. Hence, the bright area is intracellulary (intracellular organelles are not labeled here) and represents the neurons (or glia cells).</li>
      </ul>

      <h3 id="viewport-xy-red-viewport">Viewport <code>XY</code> (red viewport)</h3>

      <ul>
        <li>The upper left viewport (with a red border) shows the x-y-plane of the stack.</li>
        <li>By scrolling or using the D/F key you move into z-direction.</li>
      </ul>

      <h3 id="viewport-yz-blue-viewport">Viewport <code>YZ</code> (blue viewport)</h3>

      <ul>
        <li>The upper right viewport (with a blue border) shows the y-z-plane of the stack.</li>
        <li>By scrolling or using the D/F key you move into x-direction.</li>
      </ul>

      <h3 id="viewport-xz-green-viewport">Viewport <code>XZ</code> (green viewport)</h3>

      <ul>
        <li>The lower left viewport (with a green border) shows the x-z-plane of the stack.</li>
        <li>By scrolling or using the D/F key you move into y-direction.</li>
      </ul>

      <h3 id="arbitrary-viewport-orientation">Arbitrary Viewport Orientation</h3>

      <p>Instead of being aligned with the coordinate axes, the viewports can have <em>arbitrary orientation</em>, i.e the viewports stay orthogonal to each other, but their angle to the coordinate axes can change.</p>

      <p>You have to activate this option at <code>Preferences</code> - <code>Viewport Settings</code> - <code>Slice Plane Viewports</code>.</p>

      <ul>
        <li>Press <code>K</code> or <code>M</code> to rotate clock-wise or counter-clockwise around the <em>z axis</em>.</li>
        <li>Press <code>L</code> or <code>,</code> to rotate clock-wise or counter-clockwise around the <em>y axis</em>.</li>
        <li>Keep in mind that in arbitrary orientation you do not have original image quality. But it might help you to understand the morphology better.</li>
        <li>When you trace in arbitrary orientation mode, each time you place a node the viewports will automatically align orthogonally to tracing direction—or more precisely, the former <code>xy</code> viewport will be orthogonal to tracing direction.</li>
        <li>To restore the original axes-aligned viewport orientation, simply disable the feature.</li>
      </ul>

      <h3 id="d-viewport">3D Viewport</h3>

      <p>The lower right viewport (with a black border) represents the 3D viewport.</p>

      <ul>
        <li>The black borders represent the border of the dataset, on the edges you can see the voxel coordinates.</li>
        <li>With the 3D viewport, you can observe the development of your traced skeleton(s).</li>
        <li>The three other viewports can be seen as 3 planes around the current viewport’s center.</li>
        <li>By scrolling, you move in and out of the dataset. With the left mouse button you can pan through the stack, and with the right mouse button you rotate the stack.</li>
      </ul>

      <hr />

      <h2 id="viewport-settings">Viewport Settings</h2>

      <ul>
        <li>Under <code>Preferences</code> - <code>Viewport Settings</code> you can try the following additional settings.</li>
      </ul>

      <h3 id="general">General</h3>

      <h4 id="skeleton-visualization">Skeleton Visualization</h4>

      <ul>
        <li>The feature <em>Light effects</em> adds a virtual light source when rendering the skeleton. Hence, the skeleton looks more “3D”. Choose the setting you like more.</li>
        <li>The feature <em>Highlight Active Tree</em> is helpful if you have loaded multiple skeletons at the same time, because the currently active one is highlighted in red.</li>
        <li>The feature <em>Show All Node IDs</em> shows every node ID in the stack (and also in the 3D-Viewport). Hence, the active node is worse recognizable but maybe you may get along better.</li>
        <li>The feature <em>Override Node Radius</em> changes all radii of the skeleton to the value in the field beside. This is useful at the most, if you want your volume tracing skeleton to be depicted as a point/line-skeleton.</li>
        <li>The feature <em>Edge &lt;-&gt; Node radius</em> ratio changes the ratio of the edge size to the node size. In that way, you can visualize the nodes bigger than the segments or vice versa.</li>
      </ul>

      <h4 id="rendering-quality">Rendering Quality</h4>

      <p>You can use this to adjust the quality of the rendered skeleton. A higher quality reduces speed and vice versa, where a value of 1 ensures best quality and a value of 20 yields fastest rendering.</p>

      <h4 id="skeleton-display-modes">Skeleton Display Modes</h4>

      <p>Under “Skeleton Display Modes” you can configure how the skeleton should be displayed.</p>

      <ul>
        <li><em>Whole Skeleton</em> allows the whole loaded/traced skeleton to be displayed.</li>
        <li><em>Only Selected Trees</em> allows only the trees to be displayed that are currently selected in the treeview (they are highlighted in green).</li>
        <li><em>Hide Skeleton in Ortho VPs</em> hides the skeleton in the three orthogonal viewports, but still shows it in the 3D View.</li>
        <li><em>Hide Skeleton in Skeleton VP (fast)</em> hides the skeleton in the 3D viewport. This option is recommended if your skeletons become very large and your computer gets slower and slower. Switching the trees off significantly improves the performance.</li>
        <li>Note that if <em>“Hide Skeleton in Ortho/Skeleton VP”</em> are not checked and you still cannot see the whole skeleton, it might be that you have <em>“Only Selected Trees”</em> checked.</li>
      </ul>

      <h3 id="slice-plane-viewports">Slice Plane Viewports</h3>

      <h4 id="skeleton-overlay">Skeleton Overlay</h4>

      <ul>
        <li>If you enable <em>Highlight Intersections</em> then the points at the skeleton where it intersects one of the other slice planes will be highlighted in black.</li>
        <li>The value in <em>Depth Cutoff</em> sets how many planes before and after a skeleton you can already see it. The higher the value, the earlier the skeleton is shown in the viewports when approaching it.</li>
      </ul>

      <h4 id="voxel-filtering">Voxel Filtering</h4>

      <ul>
        <li><em>Dataset Linear Filtering</em> (enabled by default) turns on the the filtering of the slices. The image looks smoother when this option is enabled.</li>
      </ul>

      <h4 id="color-lookup-table">Color lookup table</h4>

      <p>This feature enables you to change the grey values of the dataset and the default tree colors into color values according to a <em>“Color Lookup Table” (LUT)</em>. The format of this table is the <em>ImageJ</em> format, supporting only 768 byte tables (3 bytes RGB colors for each of the 256 grey values)</p>

      <ul>
        <li>To use this feature, first load an adequat lookup table by clicking on <em>Load</em>. A window will open where you are asked for the <code>LUT</code> file.
          <ul>
            <li>Then check on <em>Use Own Dataset Colors</em> or <em>Use Own Tree Colors</em> and the dataset or the trees should change their color according to the table.</li>
          </ul>
        </li>
      </ul>

      <h4 id="dataset-dynamic-range-contrast">Dataset Dynamic Range (Contrast)</h4>

      <p>Here the intensity values (i.e. the contrast) of the dataset can be adjusted. Because it is 8-bit greyscale the range goes from 0 to 255.</p>

      <ul>
        <li>If you increase <em>Bias</em> (default 0), then the image gets brighter. If you decrease <em>Range Delta</em>, the image gets darker.</li>
        <li>A good setting is 100 for both <em>Bias</em> and <em>Range Delta</em>.</li>
      </ul>

      <h4 id="viewport-objects">Viewport Objects</h4>

      <p>Here you can toggle the display of the intersection crosshairs, which show you the intersections of the three slice plane viewports. The color of an intersecting line corresponds to the viewport border of the respective viewport, i.e red for <code>XY</code>, green for <code>XZ</code> and blue for <code>YZ</code>.</p>

      <ul>
        <li>You can also toggle the display of the size label in each slice plane viewport. The label shows you the size of the displayed dataset in μm.</li>
      </ul>

      <h4 id="object-id-overlay">Object ID Overlay</h4>

      <p>This feature is used to stain parts of the EM dataset with other colors by using a second “object id”-dataset. However this feature is yet not fully implemented.</p>

      <ul>
        <li><em>Enable Color Overlay</em> will enable this feature.</li>
      </ul>

      <h3 id="d-viewport-1">3D viewport</h3>

      <h4 id="dataset-visualization">Dataset Visualization</h4>

      <p>The buttons <code>Show XY Plane</code>, <code>Show XZ Plane</code> and <code>Show YZ Plane</code> switch the rendering of the grey planes in the 3D viewport around the current center of view on or off.</p>

      <h4 id="d-view">3D View</h4>

      <ul>
        <li>If <em>Rotate Around Active Node</em> is activated (default), then the rotation in the 3D viewport will be around the currently active node. Otherwise the view will rotate around the center of the dataset.</li>
        <li>You rotate in the 3D viewport by dragging with the right mouse button or using the <code>r90</code>, <code>r180</code> buttons in the 3D viewport to rotate 90 or 180 degrees.</li>
      </ul>

      <hr />

      <h2 id="windows-menu">Windows (Menu)</h2>

      <p>Under <code>Windows</code>, you can open the <em>Annotation</em> window, <em>Task Management</em>, and <em>Dataset Options</em> window.</p>

      <h3 id="annotation-window-1">Annotation window</h3>

      <p>See <a href="#annotation-window">here</a> for information about the Annotation window.</p>

      <h3 id="task-management">Task Management</h3>
      <p>You can manage your tracing tasks here. Tracing tasks are annotation files with a starting node and task information. Note that you need a network connection, as this feature connects to a task host.</p>

      <ul>
        <li>At first, you have to login at your task host with your username and password.</li>
        <li>On successful login, you will reach the task management widget which displays to you your current task if you have already activated one. If not, you can load one via <em>Load New Task</em>. The task file will be saved in a task-files folder. Please read the task category’s description and the task’s comment carefully.</li>
        <li>Now you can trace as usual. You can submit your work every now and then by clicking on <em>Submit</em>. If you check the <em>final</em> checkbox first, your submit will be marked as final, that is, as finished work.</li>
        <li>Through <em>Load Last Submit</em> you can load your latest submit to your task into <strong>Knossos</strong> to continue tracing. If you haven’t submitted anything, yet, the task file will be loaded instead.</li>
        <li>In the <em>Description</em> tab, you can reread the information for your task any time.</li>
        <li>You can logout to login as another user or to change the task host. If you do not logout, you will remain logged in as long as the session cookie is valid.</li>
      </ul>

      <h3 id="dataset-options">Dataset Options</h3>

      <h4 id="zooming-slice-viewports">Zooming Slice Viewports</h4>

      <ul>
        <li>You can zoom into a slice viewport by either pressing <code>I</code> on your keyboard or holding down <code>Ctrl</code> and moving your mouse wheel forward.</li>
        <li>You can zoom out of a slice viewport by either pressing <code>O</code> on your keyboard or holding down <code>Ctrl</code> and moving your mouse wheel backward.
          <ul>
            <li>The mouse cursor has to be placed over one of the slice viewports</li>
          </ul>
        </li>
        <li>Another possibility to zoom is to use the <em>Dataset Options</em> window.</li>
        <li>If you have a dataset with several magnifications, <strong>Knossos</strong> will dynamically switch between these magnifications while zooming. You can prevent this by checking <em>“Lock dataset to current mag”</em>.</li>
      </ul>

      <h4 id="zooming-3d-viewport">Zooming 3D Viewport</h4>

      <ul>
        <li>You can zoom in or out of the 3D viewport by moving your mouse wheel forward or backward respectively.</li>
        <li>Another possibility to zoom is to use the <em>Dataset Options</em> window.</li>
      </ul>

      <hr />
  </body>
</html>
